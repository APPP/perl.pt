
# Tratamento básico de Opções

 2011-02-08, por Alberto SimÃµes <ambs@cpan.org>

<img alt="Newbie Icon" src="%%BASE_URI%%imgs/babycammel.png" class="mt-image-right" style="float: right; margin: 0pt 0pt 20px 20px;" height="171" width="170" /> <div>Ao desenvolver aplicações de linha de comando é típico querermos analisar que opções foram passadas para a aplicação para activar ou desactivar determinadas funcionalidades.<br /><br />Embora exista uma centena de módulos no <i>namespace</i> <a href="http://search.cpan.org/search?query=GetOpt&amp;mode=all">Getopt</a> para o tratamento de opções de linha de comando (dos quais destaco o <a href="http://search.cpan.org/dist/Getopt-WonderBra/">Getopt::WonderBra</a>, apenas pelo seu nome), o <a class="zem_slink" href="http://www.perl.org/" title="Perl" rel="homepage">Perl</a> tem a capacidade de tratar opções básicas sem a instalação de qualquer módulo. Para isso basta usar a opção -s do Perl que automaticamente transforma qualquer opção da forma -xyz na linha de comando numa variável $xyz, e as opções da forma -foo=bar numa variável $foo com o valor "var".<br /><br />Para dar um exemplo, imaginemos uma aplicação que deva suportar a opção -v, para activar o modo verboso, e a opção -user para especificar o nome do utilizador (caso contrário utilizará a variável de ambiente USER):<br /><br />&nbsp;&nbsp; #!/usr/bin/perl -s<br />&nbsp;&nbsp; use strict;<br />&nbsp;&nbsp; use warnings;<br />&nbsp;&nbsp; our ($user, $v);<br /><br />&nbsp;&nbsp; if ($v) { print "Activei modo verboso\n"; }<br /><br />&nbsp;&nbsp; $user = $user || $ENV{USER};<br /><br />&nbsp;&nbsp; printf("Activado o utilizador $user");<br /><br />Ora, o <i>our</i> é utilizado para definir variáveis globais. É boa política definir as variáveis que se pretendem utilizar com a opção -s para que, ao usar as opções <i>strict </i>e <i>warnings</i> o Perl não se queixe de variáveis não definidas. <br /></div>

<div style="margin-top: 10px; height: 15px;" class="zemanta-pixie"><a class="zemanta-pixie-a" href="http://www.zemanta.com/" title="Enhanced by Zemanta"><img style="border: medium none; float: right;" class="zemanta-pixie-img" src="http://img.zemanta.com/zemified_e.png?x-id=4a985618-313c-4d77-a8d0-8ac1c12da0d9" alt="Enhanced by Zemanta" /></a></div>
